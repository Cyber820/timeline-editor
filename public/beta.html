<!-- public/beta.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <title>Timeline Beta — Step 1: 渲染时间轴</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="stylesheet" href="https://unpkg.com/vis-timeline@latest/styles/vis-timeline-graph2d.min.css">
  <script src="https://unpkg.com/vis-timeline/standalone/umd/vis-timeline-graph2d.min.js"></script>

  <style>
    body { margin: 0; font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, "PingFang SC", "Noto Sans SC", "Microsoft YaHei", sans-serif; }
    header { padding: 12px 16px; border-bottom: 1px solid #e5e7eb; }
    main { padding: 12px 16px; }
    #timeline { height: 720px; border: 1px solid #e5e7eb; border-radius: 8px; background: white; }
    .event-title { margin: 0; font-weight: 600; font-size: 13px; }
    .event-meta { color:#6b7280; font-size: 12px; }
  </style>

  <!-- 关键修改：start/end 使用毫秒时间戳（number），避免任何 Date 类型判定问题 -->
<!-- 只展示关键片段：去掉 import map，保留 vis 资源与调用 -->
<script type="module">
  import './fetch.js';
import './mount.js';
  import { mountTimeline } from "./src/timeline/mount.js";
  document.addEventListener('DOMContentLoaded', () => {
    const el = document.getElementById('timeline');
    if (!el) return console.error('[beta] 未找到 #timeline 容器');
    mountTimeline(el); // 会调用 ./src/timeline/fetch.js 的 fetchAndNormalize()
  });
</script>

</head>
<body>
  <header>
    <strong>Timeline Beta</strong>
    <span style="color:#6b7280;margin-left:8px;">Step 1：渲染时间轴（直接读取）</span>
  </header>

  <main>
    <div id="timeline"></div>
  </main>

  <script type="module">
    import { mountTimeline } from "./src/timeline/mount.js";
    document.addEventListener('DOMContentLoaded', () => {
      const el = document.getElementById('timeline');
      if (!el) {
        console.error('[beta] 未找到 #timeline 容器');
        return;
      }
      mountTimeline(el);
    });
  </script>
</body>
</html>
